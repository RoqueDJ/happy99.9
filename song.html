<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy99.9 - Now Playing</title>
</head>
<body>
    <h1>Now Playing: Eiffel 65 - Blue (Da Ba Dee)!</h1>

    <!-- Audio player with controls -->
    <audio id="audioPlayer" controls autoplay>
        <source id="songSource" src="https://raw.githubusercontent.com/RoqueDJ/happy99.9/main/audio/Happy%2099%20(mp3cut.net).mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <script>
        const audioPlayer = document.getElementById('audioPlayer');

        // URLs for the intro and main song
        const introUrl = "https://raw.githubusercontent.com/RoqueDJ/happy99.9/main/audio/Happy%2099%20(mp3cut.net).mp3"; // Intro song
        const mainSongUrl = "https://raw.githubusercontent.com/RoqueDJ/happy99.9/main/audio/Eiffel%2065%20-%20Blue%20(Da%20Ba%20Dee)%20(AC3%20Stereo).mp3"; // Main song

        // Store which song is currently playing in localStorage
        let currentSong = localStorage.getItem('currentSong') || 'intro'; 

        // Set the initial song based on saved state or default to intro
        if (currentSong === 'main') {
            audioPlayer.src = mainSongUrl;
        } else {
            audioPlayer.src = introUrl;
        }

        // Function to play the next song (alternating between intro and main song)
        function playNextSong() {
            // If the current song is the intro, switch to the main song
            if (audioPlayer.src.includes(introUrl)) {
                audioPlayer.src = mainSongUrl; // Switch to main song
                localStorage.setItem('currentSong', 'main'); // Save current song as 'main'
            } else {
                audioPlayer.src = introUrl; // Switch back to intro
                localStorage.setItem('currentSong', 'intro'); // Save current song as 'intro'
            }
            audioPlayer.play(); // Play the new song
        }

        // Event listener to alternate between songs when the current one ends
        audioPlayer.addEventListener('ended', function() {
            playNextSong();
        });

        // Ensure autoplay works, even if you refresh the page (prevents stopping after refresh)
        audioPlayer.autoplay = true;

    </script>
</body>
</html>
